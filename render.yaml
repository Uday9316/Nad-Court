services:
  - type: web
    name: nad-court
    runtime: node
    buildCommand: |
      npm install
      # Install OpenClaw CLI
      mkdir -p $HOME/.local/bin
      curl -fsSL https://install.openclaw.sh | bash
      # Or use direct download if above fails:
      # curl -fsSL https://github.com/openclaw/openclaw/releases/download/v0.9.0/openclaw-linux-amd64 -o $HOME/.local/bin/openclaw
      # chmod +x $HOME/.local/bin/openclaw
      echo "PATH=$HOME/.local/bin:$PATH" >> $HOME/.bashrc
      echo "OpenClaw installed at: $(which openclaw || echo 'not found')"
    startCommand: |
      export PATH="$HOME/.local/bin:$PATH"
      export HOME="/home/render"
      which openclaw && echo "OpenClaw found: $(openclaw --version)" || echo "OpenClaw not in PATH, checking..."
      ls -la $HOME/.local/bin/ || echo "bin directory not found"
      node backend/server.js
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000
      - key: HOME
        value: /home/render
